<!doctype html>
<meta charset="utf8">
<title>goodluck example</title>
<style>
    html, body {
        overflow: hidden;
        margin: 0;
    }
    #fps {
        position: absolute;
        top: 0;
        background: #000;
        color: #fff;
    }
</style>

<canvas></canvas>
<div id="fps"></div>
<script type="module">
    import Game from "./game.js";
    import {ROTATE} from "./components.js";

    import BasicMaterial from "./material_basic.js";
    import WireframeMaterial from "./material_wireframe.js";
    import PointsMaterial from "./material_points.js";
    import FlatMaterial from "./material_flat.js";
    import GouraudMaterial from "./material_gouraud.js";

    import BreathingCubeMaterial from "./material_breathing_cube.js";

    import {camera, renderable, lighting, rotating, swarming}
            from "./creators.js";
    import * as Tri from "./shapes/tri.js";
    import * as Plane from "./shapes/plane.js";
    import * as Tetrahedron from "./shapes/tetrahedron.js";
    import * as Pyramid from "./shapes/pyramid.js";
    import * as Cube from "./shapes/cube.js";
    import * as Octahedron from "./shapes/octahedron.js";
    import * as Icosphere from "./shapes/icosphere.js";
    import * as Discoball from "./shapes/discoball.js";
    import * as Monkey from "./shapes/monkey.js";

    window.game = new Game({selector: "canvas"});
    game.camera = camera(game, {
        translation: [0, 0, 10],
        fovy: 1,
        aspect: game.canvas.width / game.canvas.height,
        near: 0.1,
        far: 1000,
    });
    lighting(game, {translation: [-10, 5, 10], range: 12});
    lighting(game, {translation: [10, 5, 10], range: 12});

    let basic_material = new BasicMaterial(game.gl);
    let wireframe_material = new WireframeMaterial(game.gl);
    let points_material = new PointsMaterial(game.gl);
    let flat_material = new FlatMaterial(game.gl);
    let gouraud_material = new GouraudMaterial(game.gl);
    let breathing_cube_material = new BreathingCubeMaterial(game.gl);

    let C = [0.3, 1, 1, 1];
    let Y = [1, 1, 0.3, 1];
    let demo_material = flat_material;

    rotating(game, Tri, demo_material, {translation: [-4, 3, 0], color: Y});
    rotating(game, Plane, demo_material, {translation: [0, 3, 0], color: Y});
    rotating(game, Tetrahedron, demo_material,
            {translation: [4, 3, 0], color: Y, speed: [-0.1, -0.2, -0.3]});

    rotating(game, Pyramid, demo_material,
            {translation: [-4, 0, 0], color: Y, speed: [-0.5, 0, 0]});
    rotating(game, Cube, demo_material, {translation: [0, 0, 0], color: Y});
    rotating(game, Octahedron, demo_material,
            {translation: [4, 0, 0], scale: [1, 1, 1], color: Y});

    rotating(game, Icosphere, gouraud_material, {translation: [-4, -3, 0], color: Y});
    rotating(game, Discoball, gouraud_material, {translation: [0, -3, 0], color: Y});
    rotating(game, Monkey, gouraud_material, {translation: [4, -3, 0], color: Y});

    /*let breathing_cube = swarming(game, Tetrahedron, breathing_cube_material, {
        color: Y,
        age: 0,
        instances: 10 ** 3,
        edge: 10,
        padding: 5,
    });
    game.entities[breathing_cube] |= ROTATE;
    game.components[ROTATE][breathing_cube] = [0.1, 0.2, 0.3];
    */

    game.start();
</script>
